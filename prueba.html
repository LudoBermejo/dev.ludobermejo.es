 <html>
<head>
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>


</head>

<body>
<canvas id="maze" width="500" height="500"></canvas>
<script>
    function generateMaze(width, height) {
        var totalCells = (width*height)-1;

        var arrayCellsVisited = [];

        var positions = new Array();

        var walls = {
            rows: [],
            cols: []
        };

        for(var i=0;i<=width-1;i++) {
            walls.rows[i] = new Array();
            walls.cols[i] = new Array();
            positions[i] = new Array();
            for(var j=0;j<=height-1;j++) {
                walls.rows[i][j] = 1;
                walls.cols[i][j] = 1;
                positions[i][j] = 0
            }
        }


        var here = {
            x: Math.floor(Math.random() * width),
            y: Math.floor(Math.random() * height)
        }


        positions[here.x][here.y] = 1;


        //totalCells = 50;
        while(totalCells) {
            var neighbours = [ { x: here.x-1, y: here.y}, {x:here.x+1,y:here.y}, {x:here.x, y:here.y-1}, {x: here.x, y: here.y+1}]
            while(neighbours.length) {
                var r = Math.floor(Math.random() * neighbours.length-1)+1;
                var n = neighbours.splice(r,1)[0];

                if(n.x >= 0 && n.y >= 0 && n.x < width && n.y < height) {
                    if( positions[n.x][n.y] == 0) {
                        positions[n.x][n.y] = 1;

                        console.log("Estoy en la ", n, "desde la ",here);

                        if(n.x > here.x) {
                            console.log("Elimino columna ", n);
                            walls.cols[n.x][n.y] = 0;
                        } else if (n.x < here.x) {
                            walls.cols[here.x][here.y] = 0;
                            console.log("Elimino columna ", here);
                        } else if(n.y > here.y) {
                            walls.rows[n.x][n.y] = 0;
                            console.log("Elimino fila ", n);
                        } else if(n.y < here.y) {
                            walls.rows[here.x][here.y] = 0;
                            console.log("Elimino fila", here);
                        }

                        here = n;
                        totalCells--;
                        arrayCellsVisited.push(here);
                        break;
                    }
                }
            }

            if(neighbours == 0) {
                here = arrayCellsVisited.pop();
            }

        }

        return walls;

    }

    function drawWalls(walls) {

        var canvas = document.getElementById('maze');
        console.log(canvas);
        if (canvas.getContext){
            var ctx = canvas.getContext('2d');
            ctx.beginPath();

            var size = 20;
            for(var i=0;i<=walls.rows.length-1;i++) {
                for(var j=0;j<=walls.cols.length-1;j++) {
                    console.log("Estoy en la pos ",i,j)
                    ctx.moveTo(i*size, j*size);
                    console.log("Tiene row ",walls.rows[i][j])
                    if(walls.rows[i][j]==1 && (i >0 || j  > 0)) {

                        console.log("Muevo a ",i*size,j*size);
                        ctx.moveTo(i*size, j*size);
                        console.log("Dibujo a ",(i+1)*size,j*size);
                        ctx.lineTo((i+1)*size,j*size);
                    }

                    if(walls.cols[i][j]==1) {
                        ctx.moveTo(i*size, j*size);
                        ctx.lineTo(i*size,(j+1)*size);
                    }
                }
            }
            ctx.moveTo(i*size,0);
            ctx.lineTo(i*size,(j-1)*size);
            ctx.moveTo(i*size,j*size);
            ctx.lineTo(0,j*size);
            ctx.stroke();
        }

    }

    

    var walls = generateMaze(20,20);

    drawWalls(walls);




</script>

</body>

</html>